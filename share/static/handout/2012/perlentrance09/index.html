<!DOCTYPE html>
<html autopagermatchedrules="1" style="height: 100%;" lang="ja-JP"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title></title>
  <link href="index_files/css.css" rel="stylesheet">
  <link href="index_files/impress-demo.css" media="screen" rel="stylesheet" type="text/css">
  <link href="index_files/prettify.css" media="screen" rel="stylesheet" type="text/css">
  <link href="index_files/app.css" media="screen" rel="stylesheet" type="text/css">
</head>
<body style="height: 100%; overflow: hidden;" class="impress-supported impress-enabled impress-on-title">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<div style="position: absolute; transform-origin: left top; transition: all 0ms ease-in-out 0ms ; transform-style: preserve-3d; top: 50%; left: 50%; transform: perspective(603.774px) scale(1.65625);" id="impress"><div style="position: absolute; transform-origin: left top; transition: all 0ms ease-in-out 0ms ; transform-style: preserve-3d; transform: rotateZ(0deg) rotateY(0deg) rotateX(0deg) translate3d(0px, 0px, 0px);">
  <div style="position: absolute; transform: translate(-50%, -50%) translate3d(0px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(0.5); transform-style: preserve-3d;" data-scale="0.5" id="title" class="step active present" data-y="0" data-x="0"><h1><img src="index_files/perl-entrance_t.png" alt="Perl入学式"></h1>

<!-- data-scale="0.5" -->
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(1024px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-2" class="step future" data-y="0" data-x="1024"><h1>Perl入学式 #9</h1>

<p><a href="http://www.perl-entrance.org/">http://www.perl-entrance.org</a></p>

<ul>
<li>日時
<ul>
<li>2012年10月21日（日） 14:00 - 17:00</li>
</ul></li>
<li>会場
<ul>
<li>Joe'sクラウドコンピューティング</li>
<li><a href="http://www.joeswebhosting.net/">http://www.joeswebhosting.net</a></li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(2048px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-3" class="step future" data-y="0" data-x="2048"><h2>Perl入学式について</h2>

<ul>
<li>Perl入学式(<a href="http://www.perl-entrance.org/">http://www.perl-entrance.org</a>)は, プログラミング未経験者からPerl初心者を対象としたワークショップです</li>
<li>公式Twitter
<ul>
<li><a href="http://twitter.com/perl_entrance">@Perl_Entrance</a></li>
</ul></li>
<li>公式ハッシュタグ
<ul>
<li>#Perl入学式</li>
</ul></li>
<li>公式Facebookページ
<ul>
<li><a href="https://www.facebook.com/PerlEntrance">https://www.facebook.com/PerlEntrance</a></li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(3072px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-4" class="step future" data-y="0" data-x="3072"><h2>会場について</h2>

<ul>
<li>今回のPerl入学式は「Joe'sオープンソースJelly」の一環ということで、株式会社Joe'sクラウドコンピューティング（<a href="http://www.joeswebhosting.net/">http://www.joeswebhosting.net</a>）様より特別に会場をお借りしています</li>
<li>この場をお借りしてお礼申し上げます</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(4096px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-5" class="step future" data-y="0" data-x="4096"><h2>ロゴについて</h2>

<p><img src="index_files/perl-entrance_t_300.png" alt="Perl入学式"></p>

<ul>
<li>横山陽平さん(<a href="http://yokoyamayohei.com/">http://yokoyamayohei.com/</a>)にデザインしていただきました</li>
<li>この場をお借りしてお礼申し上げます</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(5120px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-6" class="step future" data-y="0" data-x="5120"><h2>IT勉強会スタンプラリー</h2>

<p><img src="index_files/it-stamp.png" alt="IT勉強会スタンプラリー"></p>

<ul>
<li>Perl入学式は, IT勉強会スタンプラリー(<a href="http://it-stamp.jp/">http://it-stamp.jp/</a>)に参加しています</li>
<li>今回のPerl入学式は, スタンプラリーの対象となる勉強会です</li>
<li>台紙は勉強会終了後にお渡しします</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(6144px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-7" class="step future" data-y="0" data-x="6144"><h2>喋ってる人</h2>

<ul>
<li>名前: papix (ぱぴっくす)</li>
<li>Twitter: <a href="http://twitter.com/__papix__">@__papix__</a></li>
<li>仕事: 大学院生</li>
<li>ブログ: <a href="http://papix.hateblo.jp/">Masteries</a></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(7168px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-8" class="step future" data-y="0" data-x="7168"><h2>本日の目標</h2>

<ul>
<li>前回は, 本講義のゴールである｢Mojoliciousを使ったウェブアプリケーションの開発｣を目指して, Mojoliciousの基礎を学びました.</li>
<li>#9では, Mojoliciousを使って小規模なウェブアプリケーションの開発に挑戦しつつ, これまでに学んできたPerlのテクニックを復習していきます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(0px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-9" class="step future" data-y="768" data-x="0"><h2>本日の内容</h2>

<ul>
<li>前回の復習</li>
<li>フォームとデータの送信</li>
<li>Suspendan</li>
<li>数あてゲーム</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(1024px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-10" class="step future" data-y="768" data-x="1024"><h2>準備</h2>

<ul>
<li><a href="https://github.com/perl-entrance-org/">Perl入学式のgithubアカウント</a>に, 第9回で使用するデータが入ったリポジトリがあります.
<ul>
<li>まず最初に, <code>$ git clone git://github.com/perl-entrance-org/perl-entrance-2012-09.git</code>でclone(ダウンロード)しましょう.</li>
</ul></li>
<li>gitがインストールされていない場合, インストールしましょう.
<ul>
<li>Ubuntuの場合, <code>$ sudo apt-get install git-core</code>でOKです.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(2048px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-11" class="step future" data-y="768" data-x="2048"><h2>前回の復習(15分)</h2>

<ul>
<li><code>hello.pl</code>を使います.</li>
<li>既にテンプレートが用意されています. ｢# ここを埋めよう!｣と書かれた部分に適切なコードを書いて, あなたの名前を表示するページを表示するようにしましょう.</li>
<li>端末で<code>cd perl-entrance-2012-09</code>でcloneしたディレクトリに移動し, <code>$ morbo hello.pl</code>を実行します. ブラウザで<code>localhosot:3000</code>にアクセスすれば, 挙動を確認することができます.</li>
<li>時間に余裕があれば, 自分でテンプレートを用意して, 複数のページを作ってみましょう.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(3072px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-12" class="step future" data-y="768" data-x="3072"><h2>フォームとデータの送信</h2>

<ul>
<li>Mojolicious::Liteを使えば, ウェブアプリケーションの見た目を決めるテンプレート(<code>__DATA__</code>以下の部分)と, ウェブアプリケーションの挙動を決める部分を1つのファイルで記述できる, ということを学びました.</li>
<li>しかし, 今まで作ってきたページは全て静的なページ(いつ読み込んでも同じデータが出力される)です.</li>
<li>今回は, フォームを使ってウェブアプリケーションに対してデータを送信することで, 動的なページを作ってみましょう.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(4096px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-13" class="step future" data-y="768" data-x="4096"><h2>hello.plの改造</h2>

<ul>
<li>先程作った<code>hello.pl</code>は, アクセスすると常にあなたの名前を表示します.</li>
<li>これを, このように改造してみましょう.
<ul>
<li>アクセスすると, 文字を入力するフォームと, ｢送信｣ボタンが現れる.</li>
<li>フォームに名前を入力して, ｢送信｣ボタンを押すと, ｢こんにちは(フォームに入力した名前)さん｣と表示する.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(5120px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-14" class="step future" data-y="768" data-x="5120"><h2>テンプレートの書き換え</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">@@</span><span class="pln"> index</span><span class="pun">.</span><span class="pln">html</span><span class="pun">.</span><span class="pln">ep</span></code></li><li class="L1"><code><span class="pun">&lt;</span><span class="pln">html</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pun">&lt;</span><span class="pln">head</span><span class="pun">&gt;&lt;</span><span class="pln">title</span><span class="pun">&gt;</span><span class="pln">hello</span><span class="pun">!&lt;/</span><span class="pln">title</span><span class="pun">&gt;&lt;/</span><span class="pln">head</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pun">&lt;</span><span class="pln">body style</span><span class="pun">=</span><span class="str">'padding: 30px;'</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">form action</span><span class="pun">=</span><span class="str">"/hello"</span><span class="pln"> method</span><span class="pun">=</span><span class="str">"post"</span><span class="pun">&gt;</span></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"name"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"20"</span><span class="pln"> </span><span class="pun">/&gt;</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> value</span><span class="pun">=</span><span class="str">"送信"</span><span class="pln"> </span><span class="pun">/&gt;</span></code></li><li class="L7"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="str">/form&gt;</span></code></li><li class="L8"><code><span class="str">&lt;/</span><span class="pln">body</span><span class="pun">&gt;</span></code></li><li class="L9"><code><span class="pun">&lt;/</span><span class="pln">html</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>トップページのテンプレート(<code>__DATA__</code>以下の部分)を, このように書き換えます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(6144px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-15" class="step future" data-y="768" data-x="6144"><h2>解説(1)</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">form action</span><span class="pun">=</span><span class="str">"/hello"</span><span class="pln"> method</span><span class="pun">=</span><span class="str">"post"</span><span class="pun">&gt;</span></code></li><li class="L1"><code><span class="pln">        </span><span class="pun">...</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">form</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li><code>&lt;form&gt;</code>から<code>&lt;/form&gt;</code>で囲まれた範囲が1つのフォームとなります.</li>
<li><code>&lt;form&gt;</code>には, どのページにデータを送信するかを<code>action</code>で, どんな方法でデータを送信するかを<code>method</code>で指定しなければなりません.
<ul>
<li>methodには<code>post</code>と<code>get</code>が存在します. 詳細は後述します.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(7168px, 768px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-16" class="step future" data-y="768" data-x="7168"><h2>解説(2)</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"name"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"20"</span><span class="pln"> </span><span class="pun">/&gt;</span></code></li></ol></pre>

<ul>
<li>ここがフォームの本体です. <code>&lt;input&gt;</code>で, データを入力する部品を用意することができます.</li>
<li><code>type</code>は部品の形状を指定します. 例えば<code>text</code>は, <input name="name" size="20" type="text"> このようなテキストを入力できる部品を用意してくれます.
<ul>
<li><code>text</code>以外にも, ラジオボタン<code>radio</code>, チェックボックス<code>checkbox</code>などがあります.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(0px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-17" class="step future" data-y="1536" data-x="0"><h2>解説(3)</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> value</span><span class="pun">=</span><span class="str">"送信"</span><span class="pln"> </span><span class="pun">/&gt;</span></code></li></ol></pre>

<ul>
<li><code>submit</code>は送信ボタン( <input name="submit" value="送信" type="submit"> )です. ボタンには, <code>value</code>で指定した文字が表示されます.</li>
<li>送信ボタンを押すと, 入力されたデータは, <code>&lt;input&gt;</code>内部の<code>name</code>で指定された文字列と紐付られ, <code>action</code>で指定されたページへ転送されます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(1024px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-18" class="step future" data-y="1536" data-x="1024"><h2>コードの書き換え</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="kwd">use</span><span class="pln"> </span><span class="typ">Mojolicious</span><span class="pun">::</span><span class="typ">Lite</span><span class="pun">;</span></code></li><li class="L1"><code><span class="kwd">use</span><span class="pln"> utf8</span><span class="pun">;</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">get </span><span class="str">'/'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'index'</span><span class="pun">;</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">app</span><span class="pun">-&gt;</span><span class="pln">start</span><span class="pun">;</span></code></li></ol></pre>

<ul>
<li>コードの部分(<code>__DATA__</code>より上の部分)は特に処理を行う必要がないので, このように変更します.
<ul>
<li>いつもは<code>get '/'</code>と <code>=&gt; 'index'</code>の間に<code>=&gt; sub { ... }</code>でコードを書いていましたが, 今回のように, 処理がない場合は省略可能です.</li>
</ul></li>
<li>とりあえず, この時点で実行してみましょう.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(2048px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-19" class="step future" data-y="1536" data-x="2048"><h2>実行結果</h2>

<ul>
<li>文字を入力するフォームと, 送信ボタンはきちんと出てきますが, フォームに文字を入力して送信ボタンを押すと, <code>Page not found... yet!</code>のようなエラー出てくるはずです.</li>
<li>これは, 送信されたデータを受け取り, ｢こんにちはXXXXさん｣と表示する｢hello｣というページが用意されていない為です.</li>
<li>続いて, ｢hello｣というページを作りましょう.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(3072px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-20" class="step future" data-y="1536" data-x="3072"><h2>helloのテンプレート</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">@@</span><span class="pln"> hello</span><span class="pun">.</span><span class="pln">html</span><span class="pun">.</span><span class="pln">ep</span></code></li><li class="L1"><code><span class="pun">&lt;</span><span class="pln">html</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pun">&lt;</span><span class="pln">head</span><span class="pun">&gt;&lt;</span><span class="pln">title</span><span class="pun">&gt;</span><span class="pln">hello</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&lt;%=</span><span class="pln"> $name </span><span class="pun">%&gt;!&lt;/</span><span class="pln">title</span><span class="pun">&gt;&lt;/</span><span class="pln">head</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pun">&lt;</span><span class="pln">body style</span><span class="pun">=</span><span class="str">'padding: 30px;'</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">こんにちは&lt;%=</span><span class="pln"> $name </span><span class="pun">%&gt;さん</span></code></li><li class="L5"><code><span class="pun">&lt;</span><span class="str">/body&gt;</span></code></li><li class="L6"><code><span class="str">&lt;/</span><span class="pln">html</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>コードの部分から<code>$name</code>を送り, 表示します.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(4096px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-21" class="step future" data-y="1536" data-x="4096"><h2>コードの追加</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pln">post </span><span class="str">'/hello'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="kwd">my</span><span class="pln"> $self </span><span class="pun">=</span><span class="pln"> shift</span><span class="pun">;</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">my</span><span class="pln"> $name </span><span class="pun">=</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">);</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">    $self</span><span class="pun">-&gt;</span><span class="pln">stash</span><span class="pun">(</span><span class="pln"> name </span><span class="pun">=&gt;</span><span class="pln"> $name </span><span class="pun">);</span></code></li><li class="L6"><code><span class="pln">    $self</span><span class="pun">-&gt;</span><span class="pln">render</span><span class="pun">();</span></code></li><li class="L7"><code><span class="pun">}</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'hello'</span><span class="pun">;</span></code></li></ol></pre>

<ul>
<li><code>app-&gt;start;</code>よりも上に, このようなコードを書きます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(5120px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-22" class="step future" data-y="1536" data-x="5120"><h2>解説(1)</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pln">post </span><span class="str">'/hello'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">...</span></code></li><li class="L2"><code><span class="pun">}</span></code></li></ol></pre>

<ul>
<li><code>/hello</code>というページに, postメソッドでアクセスした際の処理を書きます.</li>
<li>先程, <code>&lt;form&gt;</code>で<code>method="post"</code>と設定したので, 先頭をpostにしています. <code>method="get"</code>と設定した場合は<code>get</code>にします.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(6144px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-23" class="step future" data-y="1536" data-x="6144"><h2>解説(2)</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="kwd">my</span><span class="pln"> $name </span><span class="pun">=</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="str">'名無し'</span><span class="pun">;</span></code></li></ol></pre>

<ul>
<li><code>param</code>を使うことで, フォームから送信されたデータを受け取ることができます.</li>
<li>先程, テキストボックスは<code>&lt;input type="text" name="name" size="20"&gt;</code>で宣言していた為, テキストボックスに入力された名前は<code>name</code>で参照することができます.</li>
<li><code>$self-&gt;param('name') || '名無し'</code>としているのは, 入力が空だった場合にわかりやすくする為です(｢こんにちはnoneさん｣と表示される).</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(7168px, 1536px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-24" class="step future" data-y="1536" data-x="7168"><h2>実行結果</h2>

<ul>
<li>これで正常に動作するはずです.
<ul>
<li>フォームに名前を入れ, 送信ボタンを押せば, ｢こんにちはXXXXさん｣のように, 入力した名前が表示されます.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(0px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-25" class="step future" data-y="2304" data-x="0"><h2>練習問題(20分)</h2>

<ul>
<li><code>question01.pl</code>を使います.</li>
<li>既にテンプレートが用意されていますので, 名前と身長(cm), 体重(kg)を入力すると, <code>/bmi</code>に名前とBMIが表示されるように, コードを書いてみましょう.
<ul>
<li>BMIは<code>身長(kg) / 身長(m) * 身長(m)</code>で計算できます.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(1024px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-26" class="step future" data-y="2304" data-x="1024"><h2>複雑なテンプレート</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">&lt;</span><span class="pln">table</span><span class="pun">&gt;</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">tr</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;名前&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;</span><span class="pln">papix</span><span class="pun">&lt;</span><span class="str">/td&gt;</span></code></li><li class="L4"><code><span class="str">    &lt;/</span><span class="pln">tr</span><span class="pun">&gt;</span></code></li><li class="L5"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">tr</span><span class="pun">&gt;</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;身長&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L7"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;</span><span class="lit">180cm</span><span class="pun">&lt;</span><span class="str">/td&gt;</span></code></li><li class="L8"><code><span class="str">    &lt;/</span><span class="pln">tr</span><span class="pun">&gt;</span></code></li><li class="L9"><code><span class="pln">        </span><span class="pun">:</span></code></li><li class="L0"><code><span class="pun">&lt;/</span><span class="pln">table</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>フォームから名前, 身長, 体重, 年齢, 趣味を入力し, このような表を作るとします.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(2048px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-27" class="step future" data-y="2304" data-x="2048"><h2>複雑なテンプレート</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">&lt;</span><span class="pln">table</span><span class="pun">&gt;</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">tr</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;名前&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;&lt;%=</span><span class="pln"> $name </span><span class="pun">%&gt;&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="str">/tr&gt;</span></code></li><li class="L5"><code><span class="str">    &lt;tr&gt;</span></code></li><li class="L6"><code><span class="str">        &lt;td&gt;身長&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L7"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;&lt;%=</span><span class="pln"> $height </span><span class="pun">%&gt;&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="str">/tr&gt;</span></code></li><li class="L9"><code><span class="str">        :</span></code></li><li class="L0"><code><span class="str">&lt;/</span><span class="pln">table</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>このように, 1つ1つ書いていくのは面倒です.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(3072px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-28" class="step future" data-y="2304" data-x="3072"><h2>複雑なテンプレート</h2>

<ul>
<li>実は, テンプレートにはperlのコードを埋め込むことができます.</li>
<li>この機能を使えば, 複雑な(冗長な)テンプレートを, シンプルに書きなおすことができます.</li>
<li>では, 冗長なテンプレートで書かれた<code>list.pl</code>を書き換えて行きましょう.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(4096px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-29" class="step future" data-y="2304" data-x="4096"><h2>コードの書き換え</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pln">post </span><span class="str">'/data'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="kwd">my</span><span class="pln"> $self </span><span class="pun">=</span><span class="pln"> shift</span><span class="pun">;</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">    $self</span><span class="pun">-&gt;</span><span class="pln">stash</span><span class="pun">(</span><span class="pln"> data </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">        </span><span class="str">'名前'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">),</span></code></li><li class="L5"><code><span class="pln">        </span><span class="str">'身長'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'height'</span><span class="pun">),</span></code></li><li class="L6"><code><span class="pln">        </span><span class="str">'体重'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'weight'</span><span class="pun">),</span></code></li><li class="L7"><code><span class="pln">        </span><span class="str">'年齢'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'age'</span><span class="pun">),</span></code></li><li class="L8"><code><span class="pln">        </span><span class="str">'趣味'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'hobby'</span><span class="pun">),</span></code></li><li class="L9"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="pun">);</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">    $self</span><span class="pun">-&gt;</span><span class="pln">render</span><span class="pun">();</span></code></li><li class="L2"><code><span class="pun">}</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'data'</span><span class="pun">;</span></code></li></ol></pre>

<ul>
<li>テンプレートへは, このようにハッシュを使ってデータを渡します.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(5120px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-30" class="step future" data-y="2304" data-x="5120"><h2>テンプレートの書き換え</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">@@</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">html</span><span class="pun">.</span><span class="pln">ep</span></code></li><li class="L1"><code><span class="pun">&lt;</span><span class="pln">html</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pun">&lt;</span><span class="pln">head</span><span class="pun">&gt;&lt;</span><span class="pln">title</span><span class="pun">&gt;</span><span class="typ">Output</span><span class="pun">&lt;</span><span class="str">/title&gt;&lt;/</span><span class="pln">head</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pun">&lt;</span><span class="pln">body style</span><span class="pun">=</span><span class="str">'padding: 30px;'</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">table</span><span class="pun">&gt;</span></code></li><li class="L5"><code><span class="pun">%</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> </span><span class="kwd">my</span><span class="pln"> $topic </span><span class="pun">(</span><span class="pln">qw</span><span class="pun">/名前</span><span class="pln"> </span><span class="pun">身長</span><span class="pln"> </span><span class="pun">体重</span><span class="pln"> </span><span class="pun">年齢</span><span class="pln"> </span><span class="pun">趣味/)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">tr</span><span class="pun">&gt;</span></code></li><li class="L7"><code><span class="pln">            </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;&lt;%=</span><span class="pln"> $topic </span><span class="pun">&gt;&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L8"><code><span class="pln">            </span><span class="pun">&lt;</span><span class="pln">td</span><span class="pun">&gt;&lt;%=</span><span class="pln"> $data</span><span class="pun">-&gt;{</span><span class="pln">$topic</span><span class="pun">}</span><span class="pln"> </span><span class="pun">%&gt;&lt;/</span><span class="pln">td</span><span class="pun">&gt;</span></code></li><li class="L9"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="str">/tr&gt;</span></code></li><li class="L0"><code><span class="str">% }</span></code></li><li class="L1"><code><span class="str">    &lt;/</span><span class="pln">table</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pun">&lt;</span><span class="str">/body&gt;</span></code></li><li class="L3"><code><span class="str">&lt;/</span><span class="pln">html</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>テンプレートでは, 先頭に<code>%</code>がある行はPerlのコードが書かれている, と解釈します.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(6144px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-31" class="step future" data-y="2304" data-x="6144"><h2>練習問題(30分)</h2>

<ul>
<li><code>question02.pl</code>の, <code>__DATA__</code>以下の部分のみを書き換えて(テンプレートのみを書き換えて)次のような出力を行うページを作ろう.
<ul>
<li>テキストを入力するフォームと, 送信ボタンを持つ.</li>
<li>送信ボタンを押すと, <code>/do</code>というページに, フォームに入力したデータを送信する.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(7168px, 2304px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-32" class="step future" data-y="2304" data-x="7168"><h2>練習問題(30分)</h2>

<ul>
<li><code>/do</code>ページでは, 次のような処理を行う.
<ul>
<li>フォームに入力した文字がアルファベットの場合, <code>hello, (入力した文字列)さん!</code>と表示する.</li>
<li>フォームに入力した文字が<code>+</code>, <code>-</code>, <code>/</code>, <code>*</code>, <code>%</code>で区切られた2つの数値(例えば<code>123+45</code>)なら, その演算を行い, 結果を出力する(例の場合, <code>123 + 45 = 168</code>と表示する).</li>
<li>それ以外の場合, <code>undefined</code>と表示する.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(0px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-33" class="step future" data-y="3072" data-x="0"><h2>レイアウト</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">&lt;</span><span class="pln">html</span><span class="pun">&gt;</span></code></li><li class="L1"><code><span class="pun">&lt;</span><span class="pln">head</span><span class="pun">&gt;&lt;</span><span class="pln">title</span><span class="pun">&gt;...</span><span class="pln"> title </span><span class="pun">...&lt;/</span><span class="pln">title</span><span class="pun">&gt;&lt;/</span><span class="pln">head</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pun">&lt;</span><span class="pln">body style</span><span class="pun">=</span><span class="str">'padding: 30px;'</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pln">    </span><span class="pun">...</span><span class="pln"> contents </span><span class="pun">...</span></code></li><li class="L4"><code><span class="pun">&lt;</span><span class="str">/body&gt;</span></code></li><li class="L5"><code><span class="str">&lt;/</span><span class="pln">html</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>テンプレートの中で, 常に同じ記述を使うという箇所がいくつかあります.</li>
<li>例えば, 上記のヘッダの部分など.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(1024px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-34" class="step future" data-y="3072" data-x="1024"><h2>レイアウト</h2>

<ul>
<li>レイアウトを使えば, このような｢複数のページで同一の記述｣をまとめることができます.</li>
<li>それでは早速, 使ってみましょう.
<ul>
<li>先程使った<code>list.pl</code>を, レイアウトを使って更に改造します.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(2048px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-35" class="step future" data-y="3072" data-x="2048"><h2>レイアウト</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">@@</span><span class="pln"> layouts</span><span class="pun">/</span><span class="pln">common</span><span class="pun">.</span><span class="pln">html</span><span class="pun">.</span><span class="pln">ep</span></code></li><li class="L1"><code><span class="pun">&lt;</span><span class="pln">html</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pun">&lt;</span><span class="pln">head</span><span class="pun">&gt;&lt;</span><span class="pln">title</span><span class="pun">&gt;&lt;%=</span><span class="pln"> $title </span><span class="pun">%&gt;&lt;/</span><span class="pln">title</span><span class="pun">&gt;&lt;/</span><span class="pln">head</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pun">&lt;</span><span class="pln">body style</span><span class="pun">=</span><span class="str">'padding: 30px;'</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">&lt;%=</span><span class="pln"> content </span><span class="pun">%&gt;</span></code></li><li class="L5"><code><span class="pun">&lt;</span><span class="str">/body&gt;</span></code></li><li class="L6"><code><span class="str">&lt;/</span><span class="pln">html</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li><code>__DATA__</code>以下の部分にレイアウトを記載します.</li>
<li><code>&lt;%= content %&gt;</code>には, それぞれのページで表示する内容が埋め込まれます.</li>
<li>ヘッダは共有でも, ページのタイトルはそれぞれ異なります. <code>&lt;%= $title %&gt;</code>とすることで, その部分だけ変更することができます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(3072px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-36" class="step future" data-y="3072" data-x="3072"><h2>レイアウト</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">@@</span><span class="pln"> index</span><span class="pun">.</span><span class="pln">html</span><span class="pun">.</span><span class="pln">ep</span></code></li><li class="L1"><code><span class="pun">%</span><span class="pln"> layout </span><span class="str">'common'</span><span class="pun">,</span><span class="pln"> title </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'Input'</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">form action</span><span class="pun">=</span><span class="str">"/data"</span><span class="pln"> method</span><span class="pun">=</span><span class="str">"post"</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pln">        </span><span class="pun">名前:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"name"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"20"</span><span class="pun">&gt;&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">        </span><span class="pun">身長:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"height"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"4"</span><span class="pun">&gt;</span><span class="pln">cm</span><span class="pun">&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">体重:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"weight"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"4"</span><span class="pun">&gt;</span><span class="pln">kg</span><span class="pun">&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">年齢:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"age"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"4"</span><span class="pun">&gt;&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L7"><code><span class="pln">        </span><span class="pun">趣味:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"hobby"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"20"</span><span class="pun">&gt;&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L8"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> value</span><span class="pun">=</span><span class="str">"送信"</span><span class="pun">&gt;&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L9"><code><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">form</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>レイアウトを使うと, テンプレートをこのように書くことができます.</li>
<li><code>% layout 'common'</code>で使用するテンプレートの名前を指定します. 更に,<code>title =&gt; 'Input'</code>でページのタイトルを変更することができます(テンプレートの<code>&lt;%= $title %&gt;</code>に埋め込まれる).</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(4096px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-37" class="step future" data-y="3072" data-x="4096"><h2>練習問題(15分)</h2>

<ul>
<li><code>list.pl</code>の, <code>data.html.ep</code>のテンプレートを, レイアウトを使うように書き換えてみよう.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(5120px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-38" class="step future" data-y="3072" data-x="5120"><h2>getとpost</h2>

<ul>
<li>続いて, getとpostの違いを見てみましょう.</li>
<li><code>post.pl</code>を使います.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(6144px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-39" class="step future" data-y="3072" data-x="6144"><h2>postメソッド</h2>

<ul>
<li>この<code>post.pl</code>は, postメソッドを使って書かれています.</li>
<li>早速実行してみましょう.</li>
<li>フォームに名前を入力し, 送信ボタンを押すと, フォームに格納されたデータが, <code>/data</code>に転送されます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(7168px, 3072px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-40" class="step future" data-y="3072" data-x="7168"><h2>getメソッド</h2>

<ul>
<li>次に, この<code>post.pl</code>を, getメソッドを使うように書き換えます.</li>
<li>まず, <code>post.pl</code>を, <code>get.pl</code>という名前でコピー(<code>$ cp post.pl get.pl</code>)します.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(0px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-41" class="step future" data-y="3840" data-x="0"><h2>getメソッド</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pun">&lt;</span><span class="pln">form action</span><span class="pun">=</span><span class="str">"/data"</span><span class="pln"> method</span><span class="pun">=</span><span class="str">"get"</span><span class="pun">&gt;</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">名前:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"text"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"name"</span><span class="pln"> size</span><span class="pun">=</span><span class="str">"20"</span><span class="pun">&gt;&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> name</span><span class="pun">=</span><span class="str">"submit"</span><span class="pln"> value</span><span class="pun">=</span><span class="str">"send"</span><span class="pun">&gt;&lt;</span><span class="pln">br</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pun">&lt;/</span><span class="pln">form</span><span class="pun">&gt;</span></code></li></ol></pre>

<ul>
<li>テンプレートのフォームの部分を, このように書き換えます.</li>
<li>methodを, <code>post</code>から<code>get</code>に書き換えます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(1024px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-42" class="step future" data-y="3840" data-x="1024"><h2>getメソッド</h2>

<pre class="lang-perl prettyprint linenums"><ol class="linenums"><li class="L0"><code><span class="pln">get </span><span class="str">'/data'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="kwd">my</span><span class="pln"> $self </span><span class="pun">=</span><span class="pln"> shift</span><span class="pun">;</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">    </span><span class="kwd">my</span><span class="pln"> $name </span><span class="pun">=</span><span class="pln"> $self</span><span class="pun">-&gt;</span><span class="pln">param</span><span class="pun">(</span><span class="str">'name'</span><span class="pun">);</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">    $self</span><span class="pun">-&gt;</span><span class="pln">stash</span><span class="pun">(</span><span class="pln"> name </span><span class="pun">=&gt;</span><span class="pln"> $name </span><span class="pun">);</span></code></li><li class="L6"><code><span class="pln">    $self</span><span class="pun">-&gt;</span><span class="pln">render</span><span class="pun">();</span></code></li><li class="L7"><code><span class="pun">}</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'data'</span><span class="pun">;</span></code></li></ol></pre>

<ul>
<li>コードの部分は, このように書き換えます. 先頭を, <code>post</code>から<code>get</code>に書き換えることで, <code>/data</code>に対してgetメソッドでアクセスした場合の処理を書くことができます.</li>
<li>getもpostも, <code>$self-&gt;param()</code>で送られたデータを受け取ることができます.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(2048px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-43" class="step future" data-y="3840" data-x="2048"><h2>getメソッド</h2>

<ul>
<li>書き換えはこれで完了です. 早速実行してみましょう.
<ul>
<li>postメソッドと何が異なるでしょうか?</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(3072px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-44" class="step future" data-y="3840" data-x="3072"><h2>getとpostの違い</h2>

<ul>
<li>get
<ul>
<li>送られるデータは, URLの後ろに付けられる.</li>
<li>その書式は, <code>URL?name=value&amp;name=value ...</code>となる.</li>
<li>アルファベット以外のnameやvalueは, URLエンコードされる. </li>
</ul></li>
<li>post
<ul>
<li>送られるデータは, 標準入力として与えられる(URLに影響はない).</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(4096px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-45" class="step future" data-y="3840" data-x="4096"><h2>結局のところ...</h2>

<ul>
<li>mojoliciousを使っているならば, ｢getメソッドは送るデータがURLに付く｣, ｢postメソッドは送るデータがURLに付かない｣という, 単純な認識でいい... のではないかと思います.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(5120px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-46" class="step future" data-y="3840" data-x="5120"><h2>ちなみに...</h2>

<ul>
<li>getメソッドはURLに送るデータを与えるので, このようなこともできます.</li>
<li><code>get.pl</code>を起動し, <code>localhost:3000/data?name=papix</code>にアクセスすると...
<ul>
<li><code>post.pl</code>でも同様の行為を行うとどうなるでしょうか...?</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(6144px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-47" class="step future" data-y="3840" data-x="6144"><h2>最終問題(30分)</h2>

<ul>
<li>次のような挙動をするページを作ってみよう.
<ul>
<li><code>/</code>にアクセスすると, 1つのテキストボックスと送信ボタンが表示される.</li>
<li>送信ボタンを押すと, getメソッドで<code>/output</code>にデータを送る.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(7168px, 3840px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-48" class="step future" data-y="3840" data-x="7168"><h2>最終問題(30分)</h2>

<ul>
<li><code>/output</code>では次のような処理を行う.
<ul>
<li>送られたデータがアルファベットの文字列ならば挨拶する. 例えば<code>perl-entrance</code>が送られたなら, <code>hello, perl-entrance!</code>などのように表示する.</li>
<li>送られたデータが整数なら, それを3乗した値を示す. 例えば<code>-2</code>が送られたなら, <code>-2の3乗は-8</code>などのように表示する.</li>
<li>送られたデータが小数なら, その整数部を示す. 例えば<code>-12.3456</code>が送られたなら, <code>-12.3456の整数部は-12</code>などのように表示する.</li>
<li>送られたデータが空なら, <code>undefined</code>と表示する.</li>
<li>これらの全てに当てはまらない場合, <code>error</code>と表示する.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(0px, 4608px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-49" class="step future" data-y="4608" data-x="0"><h2>アルティメット最終問題(∞分)</h2>

<ul>
<li><code>rev_polish</code>関数を作ろう.
<ul>
<li><code>rev_polish</code>関数は, <a href="http://ja.wikipedia.org/wiki/%E9%80%86%E3%83%9D%E3%83%BC%E3%83%A9%E3%83%B3%E3%83%89%E8%A8%98%E6%B3%95">逆ポーランド記法</a>の計算を行う関数である.</li>
<li>引数として, 逆ポーランド記法が書かれた文字列を受け取り, (<code>&amp;rev_polish('3 4 +')</code>など), その計算結果を返す.</li>
<li>使用可能な演算子は加算(+), 減算(-), 乗算(*), 除算(/), 剰余算(%)とする. 使用可能な値は整数のみとする(<code>3 1.2 +</code>などは不可).</li>
<li>計算できない場合(例えば, <code>1 2 3 +</code>や<code>3 1.2 +</code>など)は, undefを返す.</li>
</ul></li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(1024px, 4608px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); transform-style: preserve-3d;" id="step-50" class="step future" data-y="4608" data-x="1024"><h2>アルティメット最終問題(∞分)</h2>

<ul>
<li>最終問題で作ったページで, 送られたデータの先頭に<code>P:</code>が付く場合, それ以降のテキストを逆ポーランド記法の式として, rev_polish関数で演算するように書き換えよう.</li>
<li>答えが導けた場合, 演算した式と, その答えを表示する. 例えば送られたデータが<code>1 2 +</code>なら, <code>1 2 + の演算結果は 3 です</code>などと表示する.</li>
<li>答えが導けない場合, 演算した式と, <code>演算できませんでした</code>という文字を表示する.</li>
</ul>
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(2048px, 4608px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(0.5); transform-style: preserve-3d;" id="step-51" data-scale="0.5" class="step future" data-y="4608" data-x="2048"><h2>質問タイム</h2>

<!-- data-scale="0.5" -->
</div><div style="position: absolute; transform: translate(-50%, -50%) translate3d(3072px, 4608px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(0.2); transform-style: preserve-3d;" id="step-52" data-scale="0.2" class="step future" data-y="4608" data-x="3072"><h2>お疲れさまでした</h2>

<!-- data-scale="0.2" -->
</div>
<!--  <div id="overview" class="step" data-x="3584" data-y="2304" data-scale="15"></div> -->
</div></div>

<div class="hint">
  <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) { 
  document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>
<script src="index_files/impress.js" type="text/javascript"></script>
<script src="index_files/prettify.js" type="text/javascript"></script>
<script src="index_files/app.js" type="text/javascript"></script>


</body></html>